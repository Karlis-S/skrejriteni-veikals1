<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8" />
<title>Skrejriteņu veikals</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; background: #fff; padding: 20px; }
  label { display: block; margin: 10px 0 5px; }
  input[type=number], input[type=text] { width: 100%; padding: 8px; box-sizing: border-box; }
  button { margin-top: 15px; padding: 10px 20px; cursor: pointer; }
  #message { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>

<h1>Elektrisko skrejriteņu veikals</h1>

<label>Skrejritenis Modelis A (300 EUR):</label>
<input type="number" id="qtyA" min="0" value="0" />

<label>Skrejritenis Modelis B (450 EUR):</label>
<input type="number" id="qtyB" min="0" value="0" />

<label>Klienta vārds:</label>
<input type="text" id="clientName" placeholder="Ievadi savu vārdu" />

<button onclick="placeOrder()">Pasūtīt</button>

<div id="message"></div>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycbwmBG7Cn8sQPhPaJTQ4xXKKT0RQlXTcXbxLex474QWDztB9WipjPjpqhfOe9N7vdEAk_g/exec';

  function placeOrder() {
    const qtyA = parseInt(document.getElementById('qtyA').value) || 0;
    const qtyB = parseInt(document.getElementById('qtyB').value) || 0;
    const client = document.getElementById('clientName').value.trim();

    if (client === '') {
      showMessage('Lūdzu, ievadi savu vārdu!');
      return;
    }

    if (qtyA === 0 && qtyB === 0) {
      showMessage('Lūdzu, izvēlies vismaz vienu skrejriteni!');
      return;
    }

    const products = [];
    if (qtyA > 0) products.push({name: 'Skrejritenis Modelis A', qty: qtyA, price: 300});
    if (qtyB > 0) products.push({name: 'Skrejritenis Modelis B', qty: qtyB, price: 450});

    const total = products.reduce((sum, p) => sum + p.qty * p.price, 0);

    const orderData = {
      products,
      total,
      client
    };

    fetch(API_URL, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(orderData)
    })
    .then(response => response.json())
    .then(data => {
      if (data.result === 'success') {
        showMessage('Pasūtījums veiksmīgi nosūtīts! Paldies, ' + client + '!');
        clearForm();
      } else {
        showMessage('Kļūda pasūtījuma nosūtīšanā: ' + data.message);
      }
    })
    .catch(err => {
      showMessage('Neizdevās nosūtīt pasūtījumu. Kļūda: ' + err.message);
    });
  }

  function showMessage(msg) {
    document.getElementById('message').textContent = msg;
  }

  function clearForm() {
    document.getElementById('qtyA').value = '0';
    document.getElementById('qtyB').value = '0';
    document.getElementById('clientName').value = '';
  }
</script>

</body>
</html>
